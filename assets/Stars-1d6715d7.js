import{r as a,a as h,j as G}from"./index-5d434cdc.js";import{R as I,_ as y,P as W,u as S,D as d,M as $,V,a as z,C as q}from"./react-three-fiber.esm-eee518fd.js";import{P as N}from"./Preload-396e7f4f.js";const k=()=>parseInt(I.replace(/\D+/g,"")),U=k(),P=U>=154?"opaque_fragment":"output_fragment";class B extends W{constructor(r){super(r),this.onBeforeCompile=(e,n)=>{const{isWebGL2:o}=n.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${P}>`,`
        ${o?`#include <${P}>`:`#extension GL_OES_standard_derivatives : enable
#include <${P}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${U>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const H=a.forwardRef((t,r)=>{const[e]=a.useState(()=>new B(null));return a.createElement("primitive",y({},t,{object:e,ref:r,attach:"material"}))});let m,b;const L=a.createContext(null),x=new $,O=new V,K=a.forwardRef(({children:t,range:r,limit:e=1e3,...n},o)=>{const s=a.useRef(null);a.useImperativeHandle(o,()=>s.current,[]);const[i,c]=a.useState([]),[[u,f,p]]=a.useState(()=>[new Float32Array(e*3),Float32Array.from({length:e*3},()=>1),Float32Array.from({length:e},()=>1)]);a.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),S(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),x.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(e,r!==void 0?r:e,i.length),m=0;m<i.length;m++)b=i[m].current,b.getWorldPosition(O).applyMatrix4(x),O.toArray(u,m*3),s.current.geometry.attributes.position.needsUpdate=!0,b.matrixWorldNeedsUpdate=!0,b.color.toArray(f,m*3),s.current.geometry.attributes.color.needsUpdate=!0,p.set([b.size],m),s.current.geometry.attributes.size.needsUpdate=!0});const v=a.useMemo(()=>({getParent:()=>s,subscribe:E=>(c(w=>[...w,E]),()=>c(w=>w.filter(F=>F.current!==E.current)))}),[]);return a.createElement("points",y({userData:{instances:i},matrixAutoUpdate:!1,ref:s,raycast:()=>null},n),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:u.length/3,array:u,itemSize:3,usage:d}),a.createElement("bufferAttribute",{attach:"attributes-color",count:f.length/3,array:f,itemSize:3,usage:d}),a.createElement("bufferAttribute",{attach:"attributes-size",count:p.length,array:p,itemSize:1,usage:d})),a.createElement(L.Provider,{value:v},t))}),T=a.forwardRef(({children:t,positions:r,colors:e,sizes:n,stride:o=3,...s},i)=>{const c=a.useRef(null);return a.useImperativeHandle(i,()=>c.current,[]),S(()=>{const u=c.current.geometry.attributes;u.position.needsUpdate=!0,e&&(u.color.needsUpdate=!0),n&&(u.size.needsUpdate=!0)}),a.createElement("points",y({ref:c},s),a.createElement("bufferGeometry",null,a.createElement("bufferAttribute",{attach:"attributes-position",count:r.length/o,array:r,itemSize:o,usage:d}),e&&a.createElement("bufferAttribute",{attach:"attributes-color",count:e.length/o,array:e,itemSize:3,usage:d}),n&&a.createElement("bufferAttribute",{attach:"attributes-size",count:n.length/o,array:n,itemSize:1,usage:d})),t)}),J=a.forwardRef((t,r)=>t.positions instanceof Float32Array?a.createElement(T,y({},t,{ref:r})):a.createElement(K,y({},t,{ref:r})));function g(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function A(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function M(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?A(Object(e),!0).forEach(function(n){g(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):A(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function D(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}new z;new z;var l=function t(r,e,n){var o=this;D(this,t),g(this,"dot2",function(s,i){return o.x*s+o.y*i}),g(this,"dot3",function(s,i,c){return o.x*s+o.y*i+o.z*c}),this.x=r,this.y=e,this.z=n},Q=[new l(1,1,0),new l(-1,1,0),new l(1,-1,0),new l(-1,-1,0),new l(1,0,1),new l(-1,0,1),new l(1,0,-1),new l(-1,0,-1),new l(0,1,1),new l(0,-1,1),new l(0,1,-1),new l(0,-1,-1)],C=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],R=new Array(512),j=new Array(512),X=function(r){r>0&&r<1&&(r*=65536),r=Math.floor(r),r<256&&(r|=r<<8);for(var e=0;e<256;e++){var n;e&1?n=C[e]^r&255:n=C[e]^r>>8&255,R[e]=R[e+256]=n,j[e]=j[e+256]=Q[n%12]}};X(0);function Y(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var r=t;t=0;for(var e=0;e<r.length;e++)t=(t+(e+1)*(r.charCodeAt(e)%96))%2147483647}return t===0&&(t=311),t}function _(t){var r=Y(t);return function(){var e=r*48271%2147483647;return r=e,e/2147483647}}var Z=function t(r){var e=this;D(this,t),g(this,"seed",0),g(this,"init",function(n){e.seed=n,e.value=_(n)}),g(this,"value",_(this.seed)),this.init(r)},ee=new Z(Math.random()),te={radius:1,center:[0,0,0]};function re(t,r){for(var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ee,n=M(M({},te),r),o=n.radius,s=n.center,i=0;i<t.length;i+=3){var c=Math.pow(e.value(),.3333333333333333),u=e.value()*2-1,f=e.value()*2-1,p=e.value()*2-1,v=Math.sqrt(u*u+f*f+p*p);u=c*u/v,f=c*f/v,p=c*p/v,t[i]=u*o+s[0],t[i+1]=f*o+s[1],t[i+2]=p*o+s[2]}return t}const ne=t=>{const r=a.useRef(),e=re(new Float32Array(5e3),{radius:1.2});return S((n,o)=>{r.current.rotation.x-=o/10,r.current.rotation.y-=o/15}),h("group",{rotation:[0,0,Math.PI/4],children:h(J,{ref:r,positions:e,stride:3,frustumCulled:!0,...t,children:h(H,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},ie=()=>h("div",{className:`w-full h-auto absolute inset-0
    z-[-1]`,children:G(q,{camera:{position:[0,0,1]},children:[h(a.Suspense,{fallback:null,children:h(ne,{})}),h(N,{all:!0})]})});export{ie as default};
